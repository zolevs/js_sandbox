<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>JSON</title>
    <script src="280619_json.js"></script>
</head>
<body>

    <div id="addButton">Get USER</div>
    <div id="testButton">Test Map</div>
    <div id="output"></div>

<script>
    const addButon = document.getElementById('addButton');
    addButon.addEventListener('click', addJSON);
    const testButton = document.getElementById('testButton');
    testButton.addEventListener('click', addJSON);
    
    function tester(){
        console.log('testing');
        var tempArray = [4,7,4,3,6,7,8,22,5,7,9];
        const html = tempArray.map(function(val,i){
            console.log(val);
            return '<li>' + i + '=' + (val * 2) + '</li>';
        })
        console.log(html.join(""));
        // output.innerHTML = '<ul>'+html.join("")+'</ul>';
    }
    String.prototype.capitalize = function(){
        return this.charAt(0).toUpperCase()+this.slice(1);
    }
    const output = document.querySelector('#output');

    function addJSON(){
        output.innerHTML = "WORKING"
        const url = "https://randomuser.me/api/?results=10";
        output.innerHTML = '';
        fetch(url)
        .then(function(response){
            return response.json();
        })
        .then(function(data){
            let people = data.results;
            console.log(people);

            return people.map(function(val,i){
                let div = document.createElement('div');
                let img = document.createElement('img');
                let span = document.createElement('span');
                img.src = val.picture.thumbnail;
                let firstName = val.name.first.capitalize();
                let lastName = val.name.last.capitalize();
                span.innerHTML = (i+1)+ '. ' +firstName+' '+ lastName;

                console.log(val);
                console.log(firstName);
                div.appendChild(span);
                div.appendChild(img);
                output.appendChild(div);
            });
        })

        .catch(function(error){
            console.log(error);
        })
    }



</script>

</body>
</html>